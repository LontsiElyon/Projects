<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>informatics-project-simon-goes-multiplayer-group-a: MQTT Handling</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">informatics-project-simon-goes-multiplayer-group-a<span id="projectnumber">&#160;1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__mqtt.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MQTT Handling</div></div>
</div><!--header-->
<div class="contents">

<p>Functions for connecting to and interacting with the MQTT server.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafafdfb4cc61192624f783873542e1d9c" id="r_gafafdfb4cc61192624f783873542e1d9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt.html#gafafdfb4cc61192624f783873542e1d9c">initializeControllerId</a> ()</td></tr>
<tr class="memdesc:gafafdfb4cc61192624f783873542e1d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and publishes the controller ID to the MQTT server.  <br /></td></tr>
<tr class="separator:gafafdfb4cc61192624f783873542e1d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2540d74153b6b26f0727af62b7b25bf4" id="r_ga2540d74153b6b26f0727af62b7b25bf4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt.html#ga2540d74153b6b26f0727af62b7b25bf4">reconnect</a> ()</td></tr>
<tr class="memdesc:ga2540d74153b6b26f0727af62b7b25bf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to reconnect to the MQTT server and subscribes to relevant topics.  <br /></td></tr>
<tr class="separator:ga2540d74153b6b26f0727af62b7b25bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5aff384aaf666fd757c28f72b72b40a" id="r_gab5aff384aaf666fd757c28f72b72b40a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt.html#gab5aff384aaf666fd757c28f72b72b40a">sendHeartbeat</a> ()</td></tr>
<tr class="memdesc:gab5aff384aaf666fd757c28f72b72b40a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a heartbeat message to the MQTT server.  <br /></td></tr>
<tr class="separator:gab5aff384aaf666fd757c28f72b72b40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f06b273defaebb581fdf1adc8969f40" id="r_ga6f06b273defaebb581fdf1adc8969f40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mqtt.html#ga6f06b273defaebb581fdf1adc8969f40">mqttCallback</a> (char *topic, byte *payload, unsigned int length)</td></tr>
<tr class="memdesc:ga6f06b273defaebb581fdf1adc8969f40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function that handles incoming MQTT messages.  <br /></td></tr>
<tr class="separator:ga6f06b273defaebb581fdf1adc8969f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for connecting to and interacting with the MQTT server. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafafdfb4cc61192624f783873542e1d9c" name="gafafdfb4cc61192624f783873542e1d9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafafdfb4cc61192624f783873542e1d9c">&#9670;&#160;</a></span>initializeControllerId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool initializeControllerId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes and publishes the controller ID to the MQTT server. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the controller ID was successfully published, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00223">223</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  223</span>                              {</div>
<div class="line"><span class="lineno">  224</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="main_8cpp.html#a0039c6a5624b8b030ef228fdab5545f0">controllerIdPublished</a>) {</div>
<div class="line"><span class="lineno">  225</span>        Serial.println(<span class="stringliteral">&quot;Initializing and Publishing Controller ID&quot;</span>);</div>
<div class="line"><span class="lineno">  226</span> </div>
<div class="line"><span class="lineno">  227</span>        <span class="comment">// Generate a unique ID for the device</span></div>
<div class="line"><span class="lineno">  228</span>        <span class="keywordtype">char</span> <a class="code hl_variable" href="group__settings.html#ga587ba0cb07f02913598610049a3bbb79">ssid</a>[23];</div>
<div class="line"><span class="lineno">  229</span>        snprintf(<a class="code hl_variable" href="group__settings.html#ga587ba0cb07f02913598610049a3bbb79">ssid</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="group__settings.html#ga587ba0cb07f02913598610049a3bbb79">ssid</a>), <span class="stringliteral">&quot;Controller-%llX&quot;</span>, ESP.getEfuseMac());</div>
<div class="line"><span class="lineno">  230</span>        <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a> = String(<a class="code hl_variable" href="group__settings.html#ga587ba0cb07f02913598610049a3bbb79">ssid</a>);  <span class="comment">// Assign the result to controllerId</span></div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>        Serial.println(<span class="stringliteral">&quot;Generated Controller ID: &quot;</span> + <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a>);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        <span class="comment">// Publish the controller ID to the MQTT server</span></div>
<div class="line"><span class="lineno">  235</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="rfid_8cpp.html#a9cd3b854e81e8a2fbcee5e6e1db1da25">client</a>.publish(<span class="stringliteral">&quot;controller/connect&quot;</span>, <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a>.c_str())) {</div>
<div class="line"><span class="lineno">  236</span>            Serial.println(<span class="stringliteral">&quot;Controller ID published successfully.&quot;</span>);</div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="main_8cpp.html#a0039c6a5624b8b030ef228fdab5545f0">controllerIdPublished</a> = <span class="keyword">true</span>;  <span class="comment">// Mark it as published</span></div>
<div class="line"><span class="lineno">  238</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  239</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  240</span>            Serial.println(<span class="stringliteral">&quot;Failed to publish Controller ID.&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  242</span>        }</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  245</span>}</div>
<div class="ttc" id="agroup__settings_html_ga587ba0cb07f02913598610049a3bbb79"><div class="ttname"><a href="group__settings.html#ga587ba0cb07f02913598610049a3bbb79">ssid</a></div><div class="ttdeci">const char * ssid</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00036">main.cpp:36</a></div></div>
<div class="ttc" id="amain_8cpp_html_a0039c6a5624b8b030ef228fdab5545f0"><div class="ttname"><a href="main_8cpp.html#a0039c6a5624b8b030ef228fdab5545f0">controllerIdPublished</a></div><div class="ttdeci">bool controllerIdPublished</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00088">main.cpp:88</a></div></div>
<div class="ttc" id="amain_8cpp_html_a70bc8ad43b183ea20b92a43f8db65e58"><div class="ttname"><a href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a></div><div class="ttdeci">String controllerId</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00139">main.cpp:139</a></div></div>
<div class="ttc" id="arfid_8cpp_html_a9cd3b854e81e8a2fbcee5e6e1db1da25"><div class="ttname"><a href="rfid_8cpp.html#a9cd3b854e81e8a2fbcee5e6e1db1da25">client</a></div><div class="ttdeci">PubSubClient client</div></div>
</div><!-- fragment --><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_gafafdfb4cc61192624f783873542e1d9c_icgraph.png" border="0" usemap="#agroup__mqtt_gafafdfb4cc61192624f783873542e1d9c_icgraph" alt=""/></div>
<map name="agroup__mqtt_gafafdfb4cc61192624f783873542e1d9c_icgraph" id="agroup__mqtt_gafafdfb4cc61192624f783873542e1d9c_icgraph">
<area shape="rect" title="Initializes and publishes the controller ID to the MQTT server." alt="" coords="397,5,552,31"/>
<area shape="rect" href="main_8cpp.html#ab5a788a03971cae1e5e641ae9b1d7fe0" title=" " alt="" coords="239,5,349,31"/>
<area shape="poly" title=" " alt="" coords="384,21,350,21,350,15,384,15"/>
<area shape="rect" href="group__mqtt.html#ga2540d74153b6b26f0727af62b7b25bf4" title="Attempts to reconnect to the MQTT server and subscribes to relevant topics." alt="" coords="104,5,191,31"/>
<area shape="poly" title=" " alt="" coords="225,21,191,21,191,15,225,15"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of the program, handles MQTT connection, game logic, and RFID checking." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="ga6f06b273defaebb581fdf1adc8969f40" name="ga6f06b273defaebb581fdf1adc8969f40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f06b273defaebb581fdf1adc8969f40">&#9670;&#160;</a></span>mqttCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mqttCallback </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function that handles incoming MQTT messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic</td><td>The topic of the incoming message. </td></tr>
    <tr><td class="paramname">payload</td><td>The payload of the message. </td></tr>
    <tr><td class="paramname">length</td><td>The length of the payload. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00371">371</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  371</span>                                                                   {</div>
<div class="line"><span class="lineno">  372</span>    Serial.print(<span class="stringliteral">&quot;Message arrived [&quot;</span>);</div>
<div class="line"><span class="lineno">  373</span>    Serial.print(topic);</div>
<div class="line"><span class="lineno">  374</span>    Serial.print(<span class="stringliteral">&quot;] &quot;</span>);</div>
<div class="line"><span class="lineno">  375</span>  </div>
<div class="line"><span class="lineno">  376</span>    String message = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; length; i++) {</div>
<div class="line"><span class="lineno">  378</span>        message += (char)payload[i];</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span>    Serial.println(message);</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordflow">if</span> (String(topic) == <span class="stringliteral">&quot;neopixel/display&quot;</span>+ <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a>) {</div>
<div class="line"><span class="lineno">  383</span>        <a class="code hl_variable" href="main_8cpp.html#a520d5bf19a4fb31c15dd1200368b058c">gameStarted</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  384</span>        <a class="code hl_variable" href="main_8cpp.html#ab89449799412ac008177c2b897a0113a">hasLost</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  385</span>        <span class="comment">// Process color sequence</span></div>
<div class="line"><span class="lineno">  386</span>        DynamicJsonDocument doc(512); <span class="comment">// Increase size if needed</span></div>
<div class="line"><span class="lineno">  387</span>        DeserializationError error = deserializeJson(doc, message);</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">if</span> (error) {</div>
<div class="line"><span class="lineno">  390</span>            Serial.print(<span class="stringliteral">&quot;deserializeJson() failed: &quot;</span>);</div>
<div class="line"><span class="lineno">  391</span>            Serial.println(error.c_str());</div>
<div class="line"><span class="lineno">  392</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  393</span>        }</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>        <span class="comment">// Clear the colorSequence array</span></div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="group__neopixel.html#ga733f7d5b0fd44b87044a3fc9d4594ceb">NUMPIXELS</a>; i++) {</div>
<div class="line"><span class="lineno">  397</span>            <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#a8cb8d305059f6c44741bbb4e1c40fd3d">COLOR_OFF</a>; <span class="comment">// Default color</span></div>
<div class="line"><span class="lineno">  398</span>        }</div>
<div class="line"><span class="lineno">  399</span>             Serial.println(<span class="stringliteral">&quot;ALL LEDS OFF&quot;</span>);</div>
<div class="line"><span class="lineno">  400</span>        <span class="comment">// Update colorSequence array based on the JSON array</span></div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordtype">int</span> sequenceLength = doc.size();</div>
<div class="line"><span class="lineno">  402</span>        Serial.print(sequenceLength);</div>
<div class="line"><span class="lineno">  403</span>        </div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sequenceLength || i &lt; <a class="code hl_define" href="group__neopixel.html#ga733f7d5b0fd44b87044a3fc9d4594ceb">NUMPIXELS</a>; i++) {</div>
<div class="line"><span class="lineno">  406</span>                    </div>
<div class="line"><span class="lineno">  407</span>            String colorStr = doc[i].as&lt;String&gt;();</div>
<div class="line"><span class="lineno">  408</span>            Serial.print(colorStr);</div>
<div class="line"><span class="lineno">  409</span>            <span class="keywordflow">if</span> (colorStr == <span class="stringliteral">&quot;RED&quot;</span>) {</div>
<div class="line"><span class="lineno">  410</span>                <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#ad86358bf19927183dd7b4ae215a29731">COLOR_RED</a>;</div>
<div class="line"><span class="lineno">  411</span>                  Serial.println(<span class="stringliteral">&quot;RED&quot;</span>);</div>
<div class="line"><span class="lineno">  412</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (colorStr == <span class="stringliteral">&quot;GREEN&quot;</span>) {</div>
<div class="line"><span class="lineno">  413</span>                <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#afc9149f5de51bd9ac4f5ebbfa153f018">COLOR_GREEN</a>;</div>
<div class="line"><span class="lineno">  414</span>                Serial.println(<span class="stringliteral">&quot;GREEN&quot;</span>);</div>
<div class="line"><span class="lineno">  415</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (colorStr == <span class="stringliteral">&quot;BLUE&quot;</span>) {</div>
<div class="line"><span class="lineno">  416</span>                <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#a23c70d699a5a775bc2e1ebeb8603f630">COLOR_BLUE</a>;</div>
<div class="line"><span class="lineno">  417</span>                Serial.println(<span class="stringliteral">&quot;BLUE&quot;</span>);</div>
<div class="line"><span class="lineno">  418</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (colorStr == <span class="stringliteral">&quot;YELLOW&quot;</span>) {</div>
<div class="line"><span class="lineno">  419</span>                <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#a4534b577b74a58b0f4b7be027af664e0">COLOR_YELLOW</a>;</div>
<div class="line"><span class="lineno">  420</span>                Serial.println(<span class="stringliteral">&quot;YELLOW&quot;</span>);</div>
<div class="line"><span class="lineno">  421</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  422</span>                <a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>[i] = <a class="code hl_define" href="main_8cpp.html#a8cb8d305059f6c44741bbb4e1c40fd3d">COLOR_OFF</a>; <span class="comment">// Default color if unknown</span></div>
<div class="line"><span class="lineno">  423</span>            }</div>
<div class="line"><span class="lineno">  424</span>        }</div>
<div class="line"><span class="lineno">  425</span> </div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>        <span class="comment">// Show the received color sequence</span></div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_function" href="group__neopixel.html#gaec32c019df4f36a4c3774c2a777691fe">showColorSequence</a>(<a class="code hl_variable" href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a>, sequenceLength);</div>
<div class="line"><span class="lineno">  429</span>        <a class="code hl_function" href="main_8cpp.html#aca0a1a403470ed5db1d66d4e4f723c91">onSequenceReceived</a>(sequenceLength);</div>
<div class="line"><span class="lineno">  430</span>    }</div>
<div class="line"><span class="lineno">  431</span> </div>
<div class="line"><span class="lineno">  432</span>    <span class="comment">// Handle the OLED display update</span></div>
<div class="line"><span class="lineno">  433</span>    <span class="keywordflow">if</span> (String(topic) == <span class="stringliteral">&quot;oled/display/&quot;</span> + <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a>) {</div>
<div class="line"><span class="lineno">  434</span>      Serial.println(<span class="stringliteral">&quot;Displaying on OLED&quot;</span>);</div>
<div class="line"><span class="lineno">  435</span>      DynamicJsonDocument doc(512);</div>
<div class="line"><span class="lineno">  436</span>      DeserializationError error = deserializeJson(doc, message);</div>
<div class="line"><span class="lineno">  437</span> </div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordflow">if</span> (error) {</div>
<div class="line"><span class="lineno">  439</span>          Serial.print(<span class="stringliteral">&quot;Failed to parse JSON: &quot;</span>);</div>
<div class="line"><span class="lineno">  440</span>          Serial.println(error.c_str());</div>
<div class="line"><span class="lineno">  441</span>          <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  442</span>      }</div>
<div class="line"><span class="lineno">  443</span> </div>
<div class="line"><span class="lineno">  444</span>      String username = doc[<span class="stringliteral">&quot;username&quot;</span>];</div>
<div class="line"><span class="lineno">  445</span>      <span class="keywordtype">int</span> points = doc[<span class="stringliteral">&quot;points&quot;</span>];</div>
<div class="line"><span class="lineno">  446</span>      <span class="keywordtype">int</span> round = doc[<span class="stringliteral">&quot;round&quot;</span>];</div>
<div class="line"><span class="lineno">  447</span>      String gameMessage = doc[<span class="stringliteral">&quot;message&quot;</span>];</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>      <span class="keywordflow">if</span> (gameMessage == <span class="stringliteral">&quot;You lost!&quot;</span>) {</div>
<div class="line"><span class="lineno">  450</span>          <a class="code hl_variable" href="main_8cpp.html#ab89449799412ac008177c2b897a0113a">hasLost</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  451</span>          <a class="code hl_function" href="display_8cpp.html#a4ae4c7dfad3931d2ffbe03503498dce2">displayLossMessage</a>();</div>
<div class="line"><span class="lineno">  452</span>      }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (gameMessage == <span class="stringliteral">&quot;Game Over!&quot;</span>) {</div>
<div class="line"><span class="lineno">  453</span>            <span class="keywordtype">int</span> finalRound = doc[<span class="stringliteral">&quot;round&quot;</span>];</div>
<div class="line"><span class="lineno">  454</span>            <a class="code hl_variable" href="main_8cpp.html#a520d5bf19a4fb31c15dd1200368b058c">gameStarted</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  455</span>            <a class="code hl_function" href="display_8cpp.html#a24f32464259d6179e4580f2afe5112aa">displayGameOverMessage</a>(finalRound);</div>
<div class="line"><span class="lineno">  456</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  457</span>          <a class="code hl_function" href="display_8cpp.html#a0680fa0c3c1dce2af5bf36b9584a3736">displayPlayerInfo</a>(username, points, round);</div>
<div class="line"><span class="lineno">  458</span>          <a class="code hl_function" href="main_8cpp.html#aa29707d0f185cc5ab5f3b3245ec7971f">requestNextSequence</a>();</div>
<div class="line"><span class="lineno">  459</span>      }</div>
<div class="line"><span class="lineno">  460</span> </div>
<div class="line"><span class="lineno">  461</span>    }</div>
<div class="line"><span class="lineno">  462</span> </div>
<div class="line"><span class="lineno">  463</span>     <span class="keywordflow">if</span> (String(topic) == <span class="stringliteral">&quot;controller/action/&quot;</span> + <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a>) {</div>
<div class="line"><span class="lineno">  464</span>        DynamicJsonDocument doc(256);</div>
<div class="line"><span class="lineno">  465</span>        DeserializationError error = deserializeJson(doc, message);</div>
<div class="line"><span class="lineno">  466</span>        </div>
<div class="line"><span class="lineno">  467</span>        <span class="keywordflow">if</span> (!error) {</div>
<div class="line"><span class="lineno">  468</span>            String action = doc[<span class="stringliteral">&quot;action&quot;</span>].as&lt;String&gt;();</div>
<div class="line"><span class="lineno">  469</span>            <span class="keywordflow">if</span> (action == <span class="stringliteral">&quot;countdown&quot;</span>) {</div>
<div class="line"><span class="lineno">  470</span>                <a class="code hl_function" href="display_8cpp.html#ae20844acf4d9b99cb81ac95c6616ad0c">startCountdown</a>();</div>
<div class="line"><span class="lineno">  471</span>            }</div>
<div class="line"><span class="lineno">  472</span>        }</div>
<div class="line"><span class="lineno">  473</span>    }     </div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>}</div>
<div class="ttc" id="adisplay_8cpp_html_a0680fa0c3c1dce2af5bf36b9584a3736"><div class="ttname"><a href="display_8cpp.html#a0680fa0c3c1dce2af5bf36b9584a3736">displayPlayerInfo</a></div><div class="ttdeci">void displayPlayerInfo(const String &amp;playerName, int points, int round)</div><div class="ttdoc">Displays player information on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="display_8cpp_source.html#l00108">display.cpp:108</a></div></div>
<div class="ttc" id="adisplay_8cpp_html_a24f32464259d6179e4580f2afe5112aa"><div class="ttname"><a href="display_8cpp.html#a24f32464259d6179e4580f2afe5112aa">displayGameOverMessage</a></div><div class="ttdeci">void displayGameOverMessage(int round)</div><div class="ttdoc">Displays a game over message on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="display_8cpp_source.html#l00148">display.cpp:148</a></div></div>
<div class="ttc" id="adisplay_8cpp_html_a4ae4c7dfad3931d2ffbe03503498dce2"><div class="ttname"><a href="display_8cpp.html#a4ae4c7dfad3931d2ffbe03503498dce2">displayLossMessage</a></div><div class="ttdeci">void displayLossMessage()</div><div class="ttdoc">Displays a loss message on the OLED screen.</div><div class="ttdef"><b>Definition</b> <a href="display_8cpp_source.html#l00051">display.cpp:51</a></div></div>
<div class="ttc" id="adisplay_8cpp_html_ae20844acf4d9b99cb81ac95c6616ad0c"><div class="ttname"><a href="display_8cpp.html#ae20844acf4d9b99cb81ac95c6616ad0c">startCountdown</a></div><div class="ttdeci">void startCountdown()</div><div class="ttdoc">Starts the countdown for the next game round.</div><div class="ttdef"><b>Definition</b> <a href="display_8cpp_source.html#l00089">display.cpp:89</a></div></div>
<div class="ttc" id="agroup__neopixel_html_ga733f7d5b0fd44b87044a3fc9d4594ceb"><div class="ttname"><a href="group__neopixel.html#ga733f7d5b0fd44b87044a3fc9d4594ceb">NUMPIXELS</a></div><div class="ttdeci">#define NUMPIXELS</div><div class="ttdoc">Number of NeoPixels.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00083">main.cpp:83</a></div></div>
<div class="ttc" id="agroup__neopixel_html_gaec32c019df4f36a4c3774c2a777691fe"><div class="ttname"><a href="group__neopixel.html#gaec32c019df4f36a4c3774c2a777691fe">showColorSequence</a></div><div class="ttdeci">void showColorSequence(uint32_t *sequence, int length)</div><div class="ttdoc">Displays a sequence of colors on the NeoPixel strip.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00177">main.cpp:177</a></div></div>
<div class="ttc" id="amain_8cpp_html_a23c70d699a5a775bc2e1ebeb8603f630"><div class="ttname"><a href="main_8cpp.html#a23c70d699a5a775bc2e1ebeb8603f630">COLOR_BLUE</a></div><div class="ttdeci">#define COLOR_BLUE</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00095">main.cpp:95</a></div></div>
<div class="ttc" id="amain_8cpp_html_a4534b577b74a58b0f4b7be027af664e0"><div class="ttname"><a href="main_8cpp.html#a4534b577b74a58b0f4b7be027af664e0">COLOR_YELLOW</a></div><div class="ttdeci">#define COLOR_YELLOW</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00096">main.cpp:96</a></div></div>
<div class="ttc" id="amain_8cpp_html_a520d5bf19a4fb31c15dd1200368b058c"><div class="ttname"><a href="main_8cpp.html#a520d5bf19a4fb31c15dd1200368b058c">gameStarted</a></div><div class="ttdeci">bool gameStarted</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00138">main.cpp:138</a></div></div>
<div class="ttc" id="amain_8cpp_html_a8cb8d305059f6c44741bbb4e1c40fd3d"><div class="ttname"><a href="main_8cpp.html#a8cb8d305059f6c44741bbb4e1c40fd3d">COLOR_OFF</a></div><div class="ttdeci">#define COLOR_OFF</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00097">main.cpp:97</a></div></div>
<div class="ttc" id="amain_8cpp_html_aa29707d0f185cc5ab5f3b3245ec7971f"><div class="ttname"><a href="main_8cpp.html#aa29707d0f185cc5ab5f3b3245ec7971f">requestNextSequence</a></div><div class="ttdeci">void requestNextSequence()</div><div class="ttdoc">Requests the next color sequence for the game.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00338">main.cpp:338</a></div></div>
<div class="ttc" id="amain_8cpp_html_ab89449799412ac008177c2b897a0113a"><div class="ttname"><a href="main_8cpp.html#ab89449799412ac008177c2b897a0113a">hasLost</a></div><div class="ttdeci">bool hasLost</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00135">main.cpp:135</a></div></div>
<div class="ttc" id="amain_8cpp_html_ababfc6b067e1de66066e046928cba92e"><div class="ttname"><a href="main_8cpp.html#ababfc6b067e1de66066e046928cba92e">colorSequence</a></div><div class="ttdeci">uint32_t colorSequence[100]</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00089">main.cpp:89</a></div></div>
<div class="ttc" id="amain_8cpp_html_aca0a1a403470ed5db1d66d4e4f723c91"><div class="ttname"><a href="main_8cpp.html#aca0a1a403470ed5db1d66d4e4f723c91">onSequenceReceived</a></div><div class="ttdeci">void onSequenceReceived(int sequenceLength)</div><div class="ttdoc">Handles game start and input windows for color sequences.</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00324">main.cpp:324</a></div></div>
<div class="ttc" id="amain_8cpp_html_ad86358bf19927183dd7b4ae215a29731"><div class="ttname"><a href="main_8cpp.html#ad86358bf19927183dd7b4ae215a29731">COLOR_RED</a></div><div class="ttdeci">#define COLOR_RED</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00093">main.cpp:93</a></div></div>
<div class="ttc" id="amain_8cpp_html_afc9149f5de51bd9ac4f5ebbfa153f018"><div class="ttname"><a href="main_8cpp.html#afc9149f5de51bd9ac4f5ebbfa153f018">COLOR_GREEN</a></div><div class="ttdeci">#define COLOR_GREEN</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00094">main.cpp:94</a></div></div>
</div><!-- fragment --><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_ga6f06b273defaebb581fdf1adc8969f40_cgraph.png" border="0" usemap="#agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_cgraph" alt=""/></div>
<map name="agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_cgraph" id="agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_cgraph">
<area shape="rect" title="Callback function that handles incoming MQTT messages." alt="" coords="5,153,115,179"/>
<area shape="rect" href="display_8cpp.html#a24f32464259d6179e4580f2afe5112aa" title="Displays a game over message on the OLED screen." alt="" coords="163,5,360,31"/>
<area shape="poly" title=" " alt="" coords="66,152,101,97,129,66,161,40,172,34,175,38,164,44,132,70,106,101,70,155"/>
<area shape="rect" href="display_8cpp.html#a4ae4c7dfad3931d2ffbe03503498dce2" title="Displays a loss message on the OLED screen." alt="" coords="183,55,339,80"/>
<area shape="poly" title=" " alt="" coords="74,151,111,120,161,89,180,82,182,87,164,94,115,124,77,155"/>
<area shape="rect" href="display_8cpp.html#a0680fa0c3c1dce2af5bf36b9584a3736" title="Displays player information on the OLED screen." alt="" coords="194,104,329,129"/>
<area shape="poly" title=" " alt="" coords="112,151,162,138,195,130,196,135,163,143,113,156"/>
<area shape="rect" href="main_8cpp.html#aca0a1a403470ed5db1d66d4e4f723c91" title="Handles game start and input windows for color sequences." alt="" coords="181,153,342,179"/>
<area shape="poly" title=" " alt="" coords="115,163,167,163,167,169,115,169"/>
<area shape="rect" href="main_8cpp.html#aa29707d0f185cc5ab5f3b3245ec7971f" title="Requests the next color sequence for the game." alt="" coords="179,203,344,228"/>
<area shape="poly" title=" " alt="" coords="113,176,196,197,195,202,112,181"/>
<area shape="rect" href="group__neopixel.html#gaec32c019df4f36a4c3774c2a777691fe" title="Displays a sequence of colors on the NeoPixel strip." alt="" coords="185,301,338,327"/>
<area shape="poly" title=" " alt="" coords="71,178,106,231,133,261,164,286,178,294,175,299,161,291,129,265,102,234,66,181"/>
<area shape="rect" href="display_8cpp.html#ae20844acf4d9b99cb81ac95c6616ad0c" title="Starts the countdown for the next game round." alt="" coords="199,252,324,277"/>
<area shape="poly" title=" " alt="" coords="77,177,115,207,164,237,186,246,184,251,161,242,112,211,74,181"/>
<area shape="rect" href="display_8cpp.html#ae50a53e622d9daf4ee388d49ebfb1d8e" title=" " alt="" coords="419,80,488,105"/>
<area shape="poly" title=" " alt="" coords="326,28,361,40,422,70,419,75,359,44,324,33"/>
<area shape="poly" title=" " alt="" coords="340,75,405,84,405,89,339,80"/>
<area shape="poly" title=" " alt="" coords="329,106,405,96,405,101,329,111"/>
<area shape="rect" href="group__neopixel.html#ga416175caed957c9440e5b23a17351ec2" title="Shows a single color on the NeoPixel strip." alt="" coords="408,301,499,327"/>
<area shape="poly" title=" " alt="" coords="338,311,394,311,394,317,338,317"/>
<area shape="poly" title=" " alt="" coords="323,254,358,237,387,210,410,178,441,117,445,119,415,181,391,214,362,242,326,258"/>
</map>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_ga6f06b273defaebb581fdf1adc8969f40_icgraph.png" border="0" usemap="#agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_icgraph" alt=""/></div>
<map name="agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_icgraph" id="agroup__mqtt_ga6f06b273defaebb581fdf1adc8969f40_icgraph">
<area shape="rect" title="Callback function that handles incoming MQTT messages." alt="" coords="112,5,221,31"/>
<area shape="rect" href="group__hardware.html#ga4fc01d736fe50cf5b977f755b675f11d" title="Initializes the game&#45;related hardware and settings." alt="" coords="5,5,64,31"/>
<area shape="poly" title=" " alt="" coords="98,21,64,21,64,15,98,15"/>
</map>
</div>

</div>
</div>
<a id="ga2540d74153b6b26f0727af62b7b25bf4" name="ga2540d74153b6b26f0727af62b7b25bf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2540d74153b6b26f0727af62b7b25bf4">&#9670;&#160;</a></span>reconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempts to reconnect to the MQTT server and subscribes to relevant topics. </p>
<dl class="section return"><dt>Returns</dt><dd>True if reconnected successfully, false otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00308">308</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  309</span>{</div>
<div class="line"><span class="lineno">  310</span>  <span class="keywordflow">while</span> (!<a class="code hl_variable" href="rfid_8cpp.html#a9cd3b854e81e8a2fbcee5e6e1db1da25">client</a>.connected())</div>
<div class="line"><span class="lineno">  311</span>  {</div>
<div class="line"><span class="lineno">  312</span>    Serial.print(<span class="stringliteral">&quot;Attempting MQTT connection...&quot;</span>);</div>
<div class="line"><span class="lineno">  313</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="main_8cpp.html#ab5a788a03971cae1e5e641ae9b1d7fe0">connectMQTT</a>();</div>
<div class="line"><span class="lineno">  314</span>  }</div>
<div class="line"><span class="lineno">  315</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// Already connected</span></div>
<div class="line"><span class="lineno">  316</span>}</div>
<div class="ttc" id="amain_8cpp_html_ab5a788a03971cae1e5e641ae9b1d7fe0"><div class="ttname"><a href="main_8cpp.html#ab5a788a03971cae1e5e641ae9b1d7fe0">connectMQTT</a></div><div class="ttdeci">bool connectMQTT()</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00247">main.cpp:247</a></div></div>
</div><!-- fragment --><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_cgraph.png" border="0" usemap="#agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_cgraph" alt=""/></div>
<map name="agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_cgraph" id="agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_cgraph">
<area shape="rect" title="Attempts to reconnect to the MQTT server and subscribes to relevant topics." alt="" coords="5,5,92,31"/>
<area shape="rect" href="main_8cpp.html#ab5a788a03971cae1e5e641ae9b1d7fe0" title=" " alt="" coords="140,5,251,31"/>
<area shape="poly" title=" " alt="" coords="92,15,126,15,126,21,92,21"/>
<area shape="rect" href="group__mqtt.html#gafafdfb4cc61192624f783873542e1d9c" title="Initializes and publishes the controller ID to the MQTT server." alt="" coords="299,5,453,31"/>
<area shape="poly" title=" " alt="" coords="251,15,285,15,285,21,251,21"/>
</map>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_icgraph.png" border="0" usemap="#agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_icgraph" alt=""/></div>
<map name="agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_icgraph" id="agroup__mqtt_ga2540d74153b6b26f0727af62b7b25bf4_icgraph">
<area shape="rect" title="Attempts to reconnect to the MQTT server and subscribes to relevant topics." alt="" coords="104,5,191,31"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of the program, handles MQTT connection, game logic, and RFID checking." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
<a id="gab5aff384aaf666fd757c28f72b72b40a" name="gab5aff384aaf666fd757c28f72b72b40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab5aff384aaf666fd757c28f72b72b40a">&#9670;&#160;</a></span>sendHeartbeat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendHeartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a heartbeat message to the MQTT server. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00353">353</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  353</span>                     {</div>
<div class="line"><span class="lineno">  354</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="rfid_8cpp.html#a9cd3b854e81e8a2fbcee5e6e1db1da25">client</a>.connected()) {</div>
<div class="line"><span class="lineno">  355</span>    String heartbeatMessage = <span class="stringliteral">&quot;{\&quot;controllerId\&quot;:\&quot;&quot;</span> + <a class="code hl_variable" href="main_8cpp.html#a70bc8ad43b183ea20b92a43f8db65e58">controllerId</a> + <span class="stringliteral">&quot;\&quot;, \&quot;status\&quot;:\&quot;alive\&quot;}&quot;</span>;</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_variable" href="rfid_8cpp.html#a9cd3b854e81e8a2fbcee5e6e1db1da25">client</a>.publish(<span class="stringliteral">&quot;controller/heartbeat&quot;</span>, heartbeatMessage.c_str());</div>
<div class="line"><span class="lineno">  357</span>    Serial.println(<span class="stringliteral">&quot;Heartbeat sent&quot;</span>);</div>
<div class="line"><span class="lineno">  358</span>  }</div>
<div class="line"><span class="lineno">  359</span>}</div>
</div><!-- fragment --><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__mqtt_gab5aff384aaf666fd757c28f72b72b40a_icgraph.png" border="0" usemap="#agroup__mqtt_gab5aff384aaf666fd757c28f72b72b40a_icgraph" alt=""/></div>
<map name="agroup__mqtt_gab5aff384aaf666fd757c28f72b72b40a_icgraph" id="agroup__mqtt_gab5aff384aaf666fd757c28f72b72b40a_icgraph">
<area shape="rect" title="Sends a heartbeat message to the MQTT server." alt="" coords="104,5,223,31"/>
<area shape="rect" href="main_8cpp.html#afe461d27b9c48d5921c00d521181f12f" title="Main loop of the program, handles MQTT connection, game logic, and RFID checking." alt="" coords="5,5,56,31"/>
<area shape="poly" title=" " alt="" coords="90,21,56,21,56,15,90,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
